<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ELL Keychain</title>
    <link href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="../../bower_components/material-design-lite/material.min.css" rel="stylesheet" />

    <link href="./main.style.css" rel="stylesheet" />

    <script src="../../bower_components/material-design-lite/material.min.js"></script>
    <script src="../../bower_components/dialog-polyfill/dialog-polyfill.js"></script>
    <script src="../../bower_components/angular/angular.min.js"></script>
</head>
<body>

    <div class="mdl-layout__container">
        <div ng-controller="MainCtrl as vm" class="bap-layout mdl-layout mdl-layout--fixed-drawer">
            <div bap-electron-link-left-menu 
                class="bap-drawer mdl-layout__drawer">
            </div>

            <div class="bap-layout__content mdl-layout__content">
                <webview ng-repeat="data in urls" 
                class="link-webview"
                ng-class="{'active': data.active}"
                ng-src="{{ trustUrl(data) }}"
                partition="persist:link"
                id="link-webview-{{$index}}"></webview>

            </div>
        </div>
    </div>

    <script src="../common/utils.js"></script>
    <script src="../menu/menu.view.js"></script>
    <script>require('./main.controller.js')</script>
    <script src="./main.view.js"></script>

    <script>


    // console.log("onload");
    // window.document.onload = function() { 
    //     const webviews = document.getElementsByTagName('webview');
    //     console.log(webviews.length);
    //     for (var i = 0; i < webviews.length; i++) { 
    //         webviews[i].addEventListener('new-window', (e) => {
    //             // const protocol = require('url').parse(e.url).protocol;
    //             // if (protocol === 'http:' || protocol === 'https:') {
    //             // shell.openExternal(e.url)
    //             // }
    //         });
    //         console.log(webviews[i]);
    //         webviews[i].addEventListener("dom-ready", function (event, view) {
    //             console.log("view", view);
    //             webviews[i].openDevTools();
    //         });
    //     }
    // };

    </script>

    <script>
        angular
            .element(document)
            .ready(function() {
                angular.bootstrap(document.body, ['MainView']);
            });
    </script>
</body>
</html>
